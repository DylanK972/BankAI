<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0d14" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/icon-192.png" />
  <title>BankIA — Démo Web</title>

  <!-- Styles animé & mobile-fix -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <div class="brand">
        <img src="assets/icon-192.png" alt="BankIA" />
        <h1>BankIA</h1>
        <span class="tag">DÉMO WEB</span>
      </div>
      <div class="row">
        <span class="pill">localStorage — gratuit</span>
        <button id="installBtn" class="btn ghost">Installer (PWA)</button>
      </div>
    </header>

    <!-- Connexion & mode IA -->
    <section class="card" style="margin-bottom:14px">
      <div class="row" style="justify-content:space-between; align-items:center; gap:12px">
        <div class="row" style="align-items:center; gap:8px">
          <span class="pill">Mois <b id="monthTag" style="margin-left:6px; color:#fff"></b></span>
        </div>
        <div class="row">
          <select id="aiMode" class="btn">
            <option value="demo" selected>Démo IA (gratuit, local)</option>
            <option value="api">Clé API (optionnel)</option>
          </select>
          <input id="apiKey" placeholder="Clé API (optionnel)" style="display:none;min-width:240px"/>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <input id="email" placeholder="Email (démo)" />
        <input id="name" placeholder="Nom" />
        <button class="btn primary" id="loginBtn">Entrer</button>
        <button class="btn" id="logoutBtn">Sortir</button>
      </div>
      <p class="small" style="margin-top:8px">⚠️ Démo uniquement : tes données restent en local sur ton appareil.</p>
    </section>

    <div class="grid">
      <!-- Comptes & Transactions -->
      <section class="card card-hover">
        <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:8px">
          <h2>Comptes & Transactions</h2>
          <span class="pill">Mois courant</span>
        </div>

        <div class="balance" id="balanceView">€0.00</div>

        <div class="kpi">
          <div class="box">
            <div class="small">Dépenses du mois</div>
            <div id="spendMonth" class="kpi-value">€0</div>
          </div>
          <div class="box">
            <div class="small">Revenus du mois</div>
            <div id="incomeMonth" class="kpi-value">€0</div>
          </div>
          <div class="box">
            <div class="small">Top catégorie</div>
            <div id="topCat" class="kpi-value">–</div>
          </div>
        </div>

        <ul class="list" id="txList"></ul>

        <!-- Contrôles manuels masqués (préservés pour app.js) -->
        <div class="row dev-hidden" style="margin-top:8px">
          <input id="txLabel" placeholder="Libellé (ex: Carrefour)" />
          <input id="txAmount" type="number" step="0.01" placeholder="Montant (+/-)" />
          <select id="txCat">
            <option>Courses</option><option>Sorties</option><option>Transport</option>
            <option>Loyer</option><option>Abonnements</option><option>Autres</option>
          </select>
          <button class="btn primary" id="addTx">Ajouter</button>
          <button class="btn" id="resetData">Réinitialiser</button>
        </div>
        <div class="row dev-hidden" style="margin-top:6px">
          <button class="btn ghost" id="exportBtn">Exporter JSON</button>
          <input type="file" id="importFile" style="display:none" accept="application/json" />
          <button class="btn ghost" id="importBtn">Importer JSON</button>
        </div>
      </section>

      <!-- Assistant (nom dynamique) -->
      <section class="card card-hover">
        <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:8px">
          <h2 id="coachTitle">Coach IA</h2>
          <span class="small">Démo locale + option API</span>
        </div>

        <div class="chat">
          <div class="chat-box" id="chatBox"></div>

          <!-- Dock d’actions (le JS va s’ancrer ici) -->
          <div class="foot">
            <input id="chatInput" placeholder="Ex: comment économiser 100€ ce mois-ci ?" style="flex:1"/>
            <button class="btn primary" id="sendChat">Envoyer</button>
          </div>

          <div class="progress"><i id="thinkingBar"></i></div>
          <div class="small" id="warn" style="opacity:.85"></div>
        </div>
      </section>
    </div>

    <!-- Budgets -->
    <section class="card card-hover" style="margin-top:14px">
      <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:8px">
        <h2>Budgets</h2>
        <span class="small">Objectifs mensuels par catégorie</span>
      </div>
      <div class="bud-row" id="budgets"></div>
    </section>

    <footer>© 2025 BankIA — Crée par Dylan Kessler & Ricardo Caupenne / Version de test en local</footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
